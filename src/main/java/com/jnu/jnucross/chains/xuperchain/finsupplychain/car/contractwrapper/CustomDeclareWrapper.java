package com.jnu.jnucross.chains.xuperchain.finsupplychain.car.contractwrapper;

import com.fasterxml.jackson.core.JsonProcessingException;
import com.jnu.jnucross.chains.FunctionResult;
import com.jnu.jnucross.chains.xuperchain.XuperChainWrapper;
import com.jnu.jnucross.chains.xuperchain.finsupplychain.car.entity.CustomFormOC;

import java.math.BigInteger;
import java.util.ArrayList;
import java.util.List;

/**
 * @author Jessy
 * @ClassName CustomDeclareWrapper
 * @Date 2023/8/28 17:47
 * @Version V1.0
 * @Description
 */
public class CustomDeclareWrapper {

    private static String abi = "[{\"inputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"formIndex\",\"type\":\"uint256\"}],\"name\":\"ValueIndex\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"orderId\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"customNo\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"customCode\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"formDigest\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"createTime\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"certificateDigest\",\"type\":\"string\"}],\"name\":\"createCustomForm\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"formIndex\",\"type\":\"uint256\"}],\"name\":\"queryCustomForm\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"formIndex\",\"type\":\"uint256\"}],\"name\":\"queryCustomState\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"stateStr\",\"type\":\"string\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"formIndex\",\"type\":\"uint256\"},{\"internalType\":\"string\",\"name\":\"newOrderState\",\"type\":\"string\"}],\"name\":\"updateCustomFormState\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}]";
    private static String bin = "608060405234801561001057600080fd5b50612334806100206000396000f3fe608060405234801561001057600080fd5b506004361061004c5760003560e01c8063142b0606146100515780634d31032f14610087578063520e9af8146100b757806375147a5e146100e7575b600080fd5b61006b600480360381019061006691906114d3565b610117565b60405161007e9796959493929190611590565b60405180910390f35b6100a1600480360381019061009c91906114d3565b6104c1565b6040516100ae9190611630565b60405180910390f35b6100d160048036038101906100cc9190611787565b610af4565b6040516100de91906118cb565b60405180910390f35b61010160048036038101906100fc91906118e6565b610c64565b60405161010e919061195d565b60405180910390f35b6060806060806060806060600061012d896104c1565b905060008060008b815260200190815260200160002090508060000181600101826002018484600401856005018660060186805461016a906119a7565b80601f0160208091040260200160405190810160405280929190818152602001828054610196906119a7565b80156101e35780601f106101b8576101008083540402835291602001916101e3565b820191906000526020600020905b8154815290600101906020018083116101c657829003601f168201915b505050505096508580546101f6906119a7565b80601f0160208091040260200160405190810160405280929190818152602001828054610222906119a7565b801561026f5780601f106102445761010080835404028352916020019161026f565b820191906000526020600020905b81548152906001019060200180831161025257829003601f168201915b50505050509550848054610282906119a7565b80601f01602080910402602001604051908101604052809291908181526020018280546102ae906119a7565b80156102fb5780601f106102d0576101008083540402835291602001916102fb565b820191906000526020600020905b8154815290600101906020018083116102de57829003601f168201915b5050505050945082805461030e906119a7565b80601f016020809104026020016040519081016040528092919081815260200182805461033a906119a7565b80156103875780601f1061035c57610100808354040283529160200191610387565b820191906000526020600020905b81548152906001019060200180831161036a57829003601f168201915b5050505050925081805461039a906119a7565b80601f01602080910402602001604051908101604052809291908181526020018280546103c6906119a7565b80156104135780601f106103e857610100808354040283529160200191610413565b820191906000526020600020905b8154815290600101906020018083116103f657829003601f168201915b50505050509150808054610426906119a7565b80601f0160208091040260200160405190810160405280929190818152602001828054610452906119a7565b801561049f5780601f106104745761010080835404028352916020019161049f565b820191906000526020600020905b81548152906001019060200180831161048257829003601f168201915b5050505050905098509850985098509850985098505050919395979092949650565b6060600080600084815260200190815260200160002060030160009054906101000a900460ff1690506000600e8111156104fe576104fd6119d8565b5b81600e811115610511576105106119d8565b5b03610553576040518060400160405280600481526020017f43465f4e000000000000000000000000000000000000000000000000000000008152509150610aee565b6001600e811115610567576105666119d8565b5b81600e81111561057a576105796119d8565b5b036105bc576040518060400160405280600481526020017f43465f55000000000000000000000000000000000000000000000000000000008152509150610aed565b6002600e8111156105d0576105cf6119d8565b5b81600e8111156105e3576105e26119d8565b5b03610625576040518060400160405280600481526020017f43465f53000000000000000000000000000000000000000000000000000000008152509150610aec565b6003600e811115610639576106386119d8565b5b81600e81111561064c5761064b6119d8565b5b0361068e576040518060400160405280600581526020017f43465f50520000000000000000000000000000000000000000000000000000008152509150610aeb565b6004600e8111156106a2576106a16119d8565b5b81600e8111156106b5576106b46119d8565b5b036106f7576040518060400160405280600481526020017f43465f52000000000000000000000000000000000000000000000000000000008152509150610aea565b6005600e81111561070b5761070a6119d8565b5b81600e81111561071e5761071d6119d8565b5b03610760576040518060400160405280600581526020017f43465f53570000000000000000000000000000000000000000000000000000008152509150610ae9565b6006600e811115610774576107736119d8565b5b81600e811115610787576107866119d8565b5b036107c9576040518060400160405280600581526020017f43465f53530000000000000000000000000000000000000000000000000000008152509150610ae8565b6007600e8111156107dd576107dc6119d8565b5b81600e8111156107f0576107ef6119d8565b5b03610832576040518060400160405280600181526020017f37000000000000000000000000000000000000000000000000000000000000008152509150610ae7565b6008600e811115610846576108456119d8565b5b81600e811115610859576108586119d8565b5b0361089b576040518060400160405280600181526020017f4c000000000000000000000000000000000000000000000000000000000000008152509150610ae6565b6009600e8111156108af576108ae6119d8565b5b81600e8111156108c2576108c16119d8565b5b03610904576040518060400160405280600181526020017f4a000000000000000000000000000000000000000000000000000000000000008152509150610ae5565b600a600e811115610918576109176119d8565b5b81600e81111561092b5761092a6119d8565b5b0361096d576040518060400160405280600181526020017f4b000000000000000000000000000000000000000000000000000000000000008152509150610ae4565b600b600e811115610981576109806119d8565b5b81600e811115610994576109936119d8565b5b036109d6576040518060400160405280600181526020017f43000000000000000000000000000000000000000000000000000000000000008152509150610ae3565b600c600e8111156109ea576109e96119d8565b5b81600e8111156109fd576109fc6119d8565b5b03610a3f576040518060400160405280600181526020017f33000000000000000000000000000000000000000000000000000000000000008152509150610ae2565b600d600e811115610a5357610a526119d8565b5b81600e811115610a6657610a656119d8565b5b03610aa8576040518060400160405280600181526020017f52000000000000000000000000000000000000000000000000000000000000008152509150610ae1565b6040518060400160405280600181526020017f500000000000000000000000000000000000000000000000000000000000000081525091505b5b5b5b5b5b5b5b5b5b5b5b5b5b50919050565b60008060016000815480929190610b0a90611a36565b9190505590506040518060e001604052808981526020018881526020018781526020016000600e811115610b4157610b406119d8565b5b8152602001868152602001858152602001848152506000808381526020019081526020016000206000820151816000019081610b7d9190611c2a565b506020820151816001019081610b939190611c2a565b506040820151816002019081610ba99190611c2a565b5060608201518160030160006101000a81548160ff0219169083600e811115610bd557610bd46119d8565b5b02179055506080820151816004019081610bef9190611c2a565b5060a0820151816005019081610c059190611c2a565b5060c0820151816006019081610c1b9190611c2a565b509050507f47cb7dcbe6ba9c9cbb06ea3249d6a574781821929f410df91b4d02fd7cd9cc0f81604051610c4e91906118cb565b60405180910390a1809150509695505050505050565b6000806000808581526020019081526020016000209050600060019050604051602001610c9090611d53565b6040516020818303038152906040528051906020012084604051602001610cb79190611d99565b6040516020818303038152906040528051906020012003610d045760008260030160006101000a81548160ff0219169083600e811115610cfa57610cf96119d8565b5b021790555061147e565b604051602001610d1390611dfc565b6040516020818303038152906040528051906020012084604051602001610d3a9190611d99565b6040516020818303038152906040528051906020012003610d875760018260030160006101000a81548160ff0219169083600e811115610d7d57610d7c6119d8565b5b021790555061147d565b604051602001610d9690611e5d565b6040516020818303038152906040528051906020012084604051602001610dbd9190611d99565b6040516020818303038152906040528051906020012003610e0a5760028260030160006101000a81548160ff0219169083600e811115610e0057610dff6119d8565b5b021790555061147c565b604051602001610e1990611ebe565b6040516020818303038152906040528051906020012084604051602001610e409190611d99565b6040516020818303038152906040528051906020012003610e8d5760038260030160006101000a81548160ff0219169083600e811115610e8357610e826119d8565b5b021790555061147b565b604051602001610e9c90611f1f565b6040516020818303038152906040528051906020012084604051602001610ec39190611d99565b6040516020818303038152906040528051906020012003610f105760048260030160006101000a81548160ff0219169083600e811115610f0657610f056119d8565b5b021790555061147a565b604051602001610f1f90611f80565b6040516020818303038152906040528051906020012084604051602001610f469190611d99565b6040516020818303038152906040528051906020012003610f935760058260030160006101000a81548160ff0219169083600e811115610f8957610f886119d8565b5b0217905550611479565b604051602001610fa290611fe1565b6040516020818303038152906040528051906020012084604051602001610fc99190611d99565b60405160208183030381529060405280519060200120036110165760068260030160006101000a81548160ff0219169083600e81111561100c5761100b6119d8565b5b0217905550611478565b60405160200161102590612042565b604051602081830303815290604052805190602001208460405160200161104c9190611d99565b60405160208183030381529060405280519060200120036110995760078260030160006101000a81548160ff0219169083600e81111561108f5761108e6119d8565b5b0217905550611477565b6040516020016110a8906120a3565b60405160208183030381529060405280519060200120846040516020016110cf9190611d99565b604051602081830303815290604052805190602001200361111c5760088260030160006101000a81548160ff0219169083600e811115611112576111116119d8565b5b0217905550611476565b60405160200161112b90612104565b60405160208183030381529060405280519060200120846040516020016111529190611d99565b604051602081830303815290604052805190602001200361119f5760098260030160006101000a81548160ff0219169083600e811115611195576111946119d8565b5b0217905550611475565b6040516020016111ae90612165565b60405160208183030381529060405280519060200120846040516020016111d59190611d99565b604051602081830303815290604052805190602001200361122257600a8260030160006101000a81548160ff0219169083600e811115611218576112176119d8565b5b0217905550611474565b604051602001611231906121c6565b60405160208183030381529060405280519060200120846040516020016112589190611d99565b60405160208183030381529060405280519060200120036112a557600b8260030160006101000a81548160ff0219169083600e81111561129b5761129a6119d8565b5b0217905550611473565b6040516020016112b490612227565b60405160208183030381529060405280519060200120846040516020016112db9190611d99565b604051602081830303815290604052805190602001200361132857600c8260030160006101000a81548160ff0219169083600e81111561131e5761131d6119d8565b5b0217905550611472565b60405160200161133790612288565b604051602081830303815290604052805190602001208460405160200161135e9190611d99565b60405160208183030381529060405280519060200120036113ab57600d8260030160006101000a81548160ff0219169083600e8111156113a1576113a06119d8565b5b0217905550611471565b6040516020016113ba906122e9565b60405160208183030381529060405280519060200120846040516020016113e19190611d99565b604051602081830303815290604052805190602001200361142e57600e8260030160006101000a81548160ff0219169083600e811115611424576114236119d8565b5b0217905550611470565b8160030160009054906101000a900460ff168260030160006101000a81548160ff0219169083600e811115611466576114656119d8565b5b0217905550600090505b5b5b5b5b5b5b5b5b5b5b5b5b5b5b809250505092915050565b6000604051905090565b600080fd5b600080fd5b6000819050919050565b6114b08161149d565b81146114bb57600080fd5b50565b6000813590506114cd816114a7565b92915050565b6000602082840312156114e9576114e8611493565b5b60006114f7848285016114be565b91505092915050565b600081519050919050565b600082825260208201905092915050565b60005b8381101561153a57808201518184015260208101905061151f565b60008484015250505050565b6000601f19601f8301169050919050565b600061156282611500565b61156c818561150b565b935061157c81856020860161151c565b61158581611546565b840191505092915050565b600060e08201905081810360008301526115aa818a611557565b905081810360208301526115be8189611557565b905081810360408301526115d28188611557565b905081810360608301526115e68187611557565b905081810360808301526115fa8186611557565b905081810360a083015261160e8185611557565b905081810360c08301526116228184611557565b905098975050505050505050565b6000602082019050818103600083015261164a8184611557565b905092915050565b600080fd5b600080fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b61169482611546565b810181811067ffffffffffffffff821117156116b3576116b261165c565b5b80604052505050565b60006116c6611489565b90506116d2828261168b565b919050565b600067ffffffffffffffff8211156116f2576116f161165c565b5b6116fb82611546565b9050602081019050919050565b82818337600083830152505050565b600061172a611725846116d7565b6116bc565b90508281526020810184848401111561174657611745611657565b5b611751848285611708565b509392505050565b600082601f83011261176e5761176d611652565b5b813561177e848260208601611717565b91505092915050565b60008060008060008060c087890312156117a4576117a3611493565b5b600087013567ffffffffffffffff8111156117c2576117c1611498565b5b6117ce89828a01611759565b965050602087013567ffffffffffffffff8111156117ef576117ee611498565b5b6117fb89828a01611759565b955050604087013567ffffffffffffffff81111561181c5761181b611498565b5b61182889828a01611759565b945050606087013567ffffffffffffffff81111561184957611848611498565b5b61185589828a01611759565b935050608087013567ffffffffffffffff81111561187657611875611498565b5b61188289828a01611759565b92505060a087013567ffffffffffffffff8111156118a3576118a2611498565b5b6118af89828a01611759565b9150509295509295509295565b6118c58161149d565b82525050565b60006020820190506118e060008301846118bc565b92915050565b600080604083850312156118fd576118fc611493565b5b600061190b858286016114be565b925050602083013567ffffffffffffffff81111561192c5761192b611498565b5b61193885828601611759565b9150509250929050565b60008115159050919050565b61195781611942565b82525050565b6000602082019050611972600083018461194e565b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b600060028204905060018216806119bf57607f821691505b6020821081036119d2576119d1611978565b5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000611a418261149d565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8203611a7357611a72611a07565b5b600182019050919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b600060088302611ae07fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82611aa3565b611aea8683611aa3565b95508019841693508086168417925050509392505050565b6000819050919050565b6000611b27611b22611b1d8461149d565b611b02565b61149d565b9050919050565b6000819050919050565b611b4183611b0c565b611b55611b4d82611b2e565b848454611ab0565b825550505050565b600090565b611b6a611b5d565b611b75818484611b38565b505050565b5b81811015611b9957611b8e600082611b62565b600181019050611b7b565b5050565b601f821115611bde57611baf81611a7e565b611bb884611a93565b81016020851015611bc7578190505b611bdb611bd385611a93565b830182611b7a565b50505b505050565b600082821c905092915050565b6000611c0160001984600802611be3565b1980831691505092915050565b6000611c1a8383611bf0565b9150826002028217905092915050565b611c3382611500565b67ffffffffffffffff811115611c4c57611c4b61165c565b5b611c5682546119a7565b611c61828285611b9d565b600060209050601f831160018114611c945760008415611c82578287015190505b611c8c8582611c0e565b865550611cf4565b601f198416611ca286611a7e565b60005b82811015611cca57848901518255600182019150602085019450602081019050611ca5565b86831015611ce75784890151611ce3601f891682611bf0565b8355505b6001600288020188555050505b505050505050565b600081905092915050565b7f43465f4e00000000000000000000000000000000000000000000000000000000600082015250565b6000611d3d600483611cfc565b9150611d4882611d07565b600482019050919050565b6000611d5e82611d30565b9150819050919050565b6000611d7382611500565b611d7d8185611cfc565b9350611d8d81856020860161151c565b80840191505092915050565b6000611da58284611d68565b915081905092915050565b7f43465f5500000000000000000000000000000000000000000000000000000000600082015250565b6000611de6600483611cfc565b9150611df182611db0565b600482019050919050565b6000611e0782611dd9565b9150819050919050565b7f43465f5300000000000000000000000000000000000000000000000000000000600082015250565b6000611e47600483611cfc565b9150611e5282611e11565b600482019050919050565b6000611e6882611e3a565b9150819050919050565b7f43465f5052000000000000000000000000000000000000000000000000000000600082015250565b6000611ea8600583611cfc565b9150611eb382611e72565b600582019050919050565b6000611ec982611e9b565b9150819050919050565b7f43465f5200000000000000000000000000000000000000000000000000000000600082015250565b6000611f09600483611cfc565b9150611f1482611ed3565b600482019050919050565b6000611f2a82611efc565b9150819050919050565b7f43465f5357000000000000000000000000000000000000000000000000000000600082015250565b6000611f6a600583611cfc565b9150611f7582611f34565b600582019050919050565b6000611f8b82611f5d565b9150819050919050565b7f43465f5353000000000000000000000000000000000000000000000000000000600082015250565b6000611fcb600583611cfc565b9150611fd682611f95565b600582019050919050565b6000611fec82611fbe565b9150819050919050565b7f3700000000000000000000000000000000000000000000000000000000000000600082015250565b600061202c600183611cfc565b915061203782611ff6565b600182019050919050565b600061204d8261201f565b9150819050919050565b7f4c00000000000000000000000000000000000000000000000000000000000000600082015250565b600061208d600183611cfc565b915061209882612057565b600182019050919050565b60006120ae82612080565b9150819050919050565b7f4a00000000000000000000000000000000000000000000000000000000000000600082015250565b60006120ee600183611cfc565b91506120f9826120b8565b600182019050919050565b600061210f826120e1565b9150819050919050565b7f4b00000000000000000000000000000000000000000000000000000000000000600082015250565b600061214f600183611cfc565b915061215a82612119565b600182019050919050565b600061217082612142565b9150819050919050565b7f4300000000000000000000000000000000000000000000000000000000000000600082015250565b60006121b0600183611cfc565b91506121bb8261217a565b600182019050919050565b60006121d1826121a3565b9150819050919050565b7f3300000000000000000000000000000000000000000000000000000000000000600082015250565b6000612211600183611cfc565b915061221c826121db565b600182019050919050565b600061223282612204565b9150819050919050565b7f5200000000000000000000000000000000000000000000000000000000000000600082015250565b6000612272600183611cfc565b915061227d8261223c565b600182019050919050565b600061229382612265565b9150819050919050565b7f5000000000000000000000000000000000000000000000000000000000000000600082015250565b60006122d3600183611cfc565b91506122de8261229d565b600182019050919050565b60006122f4826122c6565b915081905091905056fea26469706673582212204cf5689b77587a487eddc75af210bdf610a47608f7ea8c5fc28577adaed23c9d64736f6c63430008120033";
    private static String contractName = "CustomDeclare3";
    private static XuperChainWrapper xuperChainWrapper = XuperChainWrapper.build();


    public static BigInteger uploadCustomFormTC(CustomFormOC customForm) throws JsonProcessingException {
        List<String> args = new ArrayList<>();
        args.add(customForm.getOrderId());
        args.add(customForm.getCustomNo());
        args.add(customForm.getCustomCode());
        args.add(customForm.getFormDigest());
        args.add(customForm.getCreateTime());
        args.add(customForm.getCertificateDigest());
        FunctionResult functionResult = xuperChainWrapper.send(abi, contractName, null, "createCustomForm", args, false, null, false);
        String returnIndex = functionResult.result.get(0).toString();
        customForm.setFormIndexOnChain(new BigInteger(returnIndex));
        System.out.println("----" + functionResult.result.get(0));
        System.out.println("----" + functionResult.transactionHash);
        return new BigInteger(returnIndex);
    }

    public static boolean updateOCCustomFormState(BigInteger onChainIndex, String newState) throws JsonProcessingException {
        List<String> args = new ArrayList<>();
        args.add(String.valueOf(onChainIndex));
        args.add(newState);
        FunctionResult functionResult = xuperChainWrapper.send(abi, contractName, null, "updateCustomFormState", args, false, null, false);
        System.out.println("----" + functionResult.result);
        System.out.println("----" + functionResult.transactionHash);
        return true;
    }

    public static List queryOCCustomForm(BigInteger onChainIndex) throws JsonProcessingException {
        List<String> args = new ArrayList<>();
        args.add(String.valueOf(onChainIndex));
        FunctionResult functionResult = xuperChainWrapper.send(abi, contractName, null, "queryCustomForm", args, false, null, false);
        System.out.println("----" + functionResult.result);
        System.out.println("----" + functionResult.transactionHash);
        return functionResult.result;
    }

    public static List  queryOCCustomFormState(BigInteger onChainIndex) throws JsonProcessingException {
        List<String> args = new ArrayList<>();
        args.add(String.valueOf(onChainIndex));
        FunctionResult functionResult = xuperChainWrapper.send(abi, contractName, null, "queryCustomState", args, false, null, false);
        System.out.println("----" + functionResult.result);
        System.out.println("----" + functionResult.transactionHash);
        return functionResult.result;
    }
}
